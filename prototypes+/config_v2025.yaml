# BTQuant v2025 Configuration
# Advanced Multi-Modal Transformer-GNN Trading Strategy Configuration

# ==================== TRADING CONFIGURATION ====================
trading:
  # Basic trading parameters
  initial_cash: 100000.0
  commission: 0.00075
  slippage_bps: 5.0
  max_leverage: 3.0
  
  # Position sizing and risk management
  max_position_size: 0.25  # Maximum 25% of portfolio per position
  min_position_size: 0.01  # Minimum 1% position
  max_portfolio_concentration: 0.6  # Maximum 60% in single asset class
  
  # Risk limits
  max_daily_loss: 0.02  # Maximum 2% daily loss
  max_drawdown_threshold: 0.15  # Stop trading if 15% drawdown
  var_confidence: 0.05  # 5% VaR confidence level
  stress_test_scenarios: 10  # Number of stress test scenarios
  
  # Time-based controls
  trading_hours:
    start: "09:30"
    end: "16:00"
    timezone: "US/Eastern"
  
  # Asset universe
  supported_assets:
    - "BTC-USD"
    - "ETH-USD"
    - "SPY"
    - "QQQ"
    - "AAPL"
    - "MSFT"
    - "GOOGL"
    - "TSLA"

# ==================== MODEL CONFIGURATION ====================
models:
  # Transformer-GNN Architecture
  transformer:
    model_dim: 256
    num_heads: 8
    num_layers: 6
    dropout: 0.1
    max_sequence_length: 100
    positional_encoding: true
    
  # Graph Neural Network
  gnn:
    hidden_dim: 128
    num_gnn_layers: 3
    gnn_type: "GAT"  # GAT, GCN, or TransformerConv
    edge_dropout: 0.1
    node_features: 64
    
  # Reinforcement Learning
  rl:
    algorithm: "PPO"  # PPO, SAC, TD3
    learning_rate: 3e-4
    gamma: 0.99
    clip_range: 0.2
    entropy_coef: 0.01
    value_coef: 0.5
    max_grad_norm: 0.5
    
  # Ensemble Configuration
  ensemble:
    use_ensemble: true
    models:
      - "transformer_gnn"
      - "xgboost"
      - "lightgbm"
      - "lstm"
    weights: [0.4, 0.2, 0.2, 0.2]
    voting_threshold: 0.6

# ==================== FEATURE ENGINEERING ====================
features:
  # Quantum-inspired features
  quantum_features:
    enable: true
    harmonic_oscillator: true
    wave_function_collapse: true
    entanglement_proxy: true
    tunneling_effect: true
    
  # Technical indicators
  technical:
    # Moving averages
    ema_periods: [7, 14, 21, 50, 100, 200]
    sma_periods: [10, 20, 50]
    adaptive_ma: true
    
    # Momentum indicators
    rsi_periods: [7, 14, 21]
    macd_settings: [12, 26, 9]
    stochastic: true
    adx_period: 14
    cci_period: 14
    
    # Volatility indicators
    bollinger_bands: [20, 2.0]
    atr_period: 14
    volatility_ratios: [5, 10, 20]
    
  # Market microstructure
  microstructure:
    bid_ask_spread_proxy: true
    price_impact_estimation: true
    kyle_lambda: true
    amihud_illiquidity: true
    roll_spread: true
    
  # Alternative data
  alternative_data:
    sentiment_analysis: true
    news_sentiment_weight: 0.3
    social_sentiment_weight: 0.2
    analyst_sentiment_weight: 0.5
    
    # Economic indicators
    macro_indicators:
      - "unemployment_rate"
      - "inflation_rate"
      - "gdp_growth"
      - "interest_rates"
      - "vix_index"
    
  # Volume analysis
  volume:
    volume_profile: true
    on_balance_volume: true
    accumulation_distribution: true
    chaikin_money_flow: true
    volume_weighted_price: true

# ==================== REGIME DETECTION ====================
regime_detection:
  enable: true
  methods:
    - "volatility_clustering"
    - "trend_analysis"
    - "correlation_regime"
    - "market_stress"
  
  # Volatility regimes
  volatility:
    lookback_period: 60
    threshold_multiplier: 1.5
    garch_model: "GARCH(1,1)"
    
  # Trend regimes
  trend:
    short_ma: 12
    long_ma: 26
    trend_strength_threshold: 0.1
    
  # Market stress detection
  stress:
    indicators:
      - "skewness"
      - "kurtosis"
      - "tail_risk"
    threshold_percentile: 80
    
  # Regime switching model
  markov_switching:
    enable: true
    num_regimes: 4  # bull, bear, sideways, volatile
    transition_smoothing: 0.1

# ==================== OPTIMIZATION ====================
optimization:
  # Hyperparameter optimization
  optuna:
    n_trials: 1000
    n_jobs: -1  # Use all available cores
    pruner: "hyperband"
    sampler: "tpe"
    
  # Walk-forward optimization
  walk_forward:
    enable: true
    train_period_months: 12
    test_period_months: 3
    step_months: 1
    min_train_samples: 1000
    
  # Cross-validation
  cross_validation:
    method: "time_series_split"
    n_splits: 5
    test_size: 0.2
    
  # Parameter constraints
  constraints:
    ema_fast_max: 30
    ema_slow_min_ratio: 1.5  # ema_slow >= ema_fast * 1.5
    risk_per_trade_max: 0.02
    max_correlation: 0.8

# ==================== DATA CONFIGURATION ====================
data:
  # Data sources
  sources:
    primary: "database"  # database, yahoo, alpha_vantage, quandl
    backup: "yahoo"
    
  # Caching
  cache:
    enable: true
    directory: ".btq_cache_v2025"
    compression: "zstd"
    max_cache_size_gb: 10
    
  # Data quality
  quality:
    outlier_detection: true
    outlier_method: "isolation_forest"
    missing_data_threshold: 0.05
    data_validation: true
    
  # Real-time data
  realtime:
    enable: false
    websocket_feeds:
      - "binance"
      - "coinbase"
      - "alpaca"
    update_frequency_ms: 100

# ==================== EXECUTION ====================
execution:
  # Order management
  order_management:
    smart_routing: true
    order_size_optimization: true
    execution_algo: "twap"  # twap, vwap, implementation_shortfall
    
  # Transaction cost analysis
  tca:
    enable: true
    benchmark: "arrival_price"
    slippage_model: "linear"
    market_impact_model: "sqrt"
    
  # Portfolio rebalancing
  rebalancing:
    frequency: "daily"  # intraday, daily, weekly
    threshold: 0.05  # 5% deviation threshold
    method: "proportional"

# ==================== MONITORING ====================
monitoring:
  # Performance tracking
  performance:
    benchmark: "SPY"
    track_alpha: true
    track_beta: true
    track_sharpe: true
    track_sortino: true
    track_calmar: true
    
  # Risk monitoring
  risk:
    var_calculation: "parametric"  # parametric, historical, monte_carlo
    stress_testing: true
    scenario_analysis: true
    
  # Alerts
  alerts:
    max_drawdown_alert: 0.10
    daily_loss_alert: 0.02
    position_concentration_alert: 0.30
    model_degradation_alert: true
    
  # Logging
  logging:
    level: "INFO"
    format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
    file_rotation: "midnight"
    max_log_files: 30

# ==================== DEPLOYMENT ====================
deployment:
  # Environment
  environment: "development"  # development, staging, production
  
  # GPU acceleration
  gpu:
    enable: true
    device_id: 0
    memory_fraction: 0.8
    mixed_precision: true
    
  # Distributed computing
  distributed:
    enable: false
    backend: "ray"  # ray, dask
    num_workers: 4
    
  # Model serving
  serving:
    framework: "torch_serve"  # torch_serve, tensorflow_serving
    batch_size: 32
    max_latency_ms: 100
    
  # Experiment tracking
  experiment_tracking:
    platform: "wandb"  # wandb, mlflow, tensorboard
    project_name: "btquant_v2025"
    
# ==================== SECURITY ====================
security:
  # API keys and credentials
  credentials:
    encryption: true
    key_rotation: true
    vault_integration: false
    
  # Data privacy
  privacy:
    data_anonymization: false
    gdpr_compliance: true
    data_retention_days: 365
    
  # Access control
  access:
    authentication: "token_based"
    authorization: "rbac"
    audit_logging: true

# ==================== BACKTESTING ====================
backtesting:
  # Historical simulation
  simulation:
    start_date: "2020-01-01"
    end_date: "2025-01-01"
    benchmark: "SPY"
    
  # Market simulation
  market_sim:
    realistic_execution: true
    market_impact: true
    bid_ask_spread: true
    partial_fills: true
    
  # Performance metrics
  metrics:
    calculate_all: true
    custom_metrics:
      - "information_ratio"
      - "maximum_adverse_excursion"
      - "maximum_favorable_excursion"
      - "profit_factor"
      - "expectancy"
    
  # Reporting
  reporting:
    generate_html: true
    include_trades: true
    include_equity_curve: true
    include_drawdown_curve: true
    risk_metrics: true